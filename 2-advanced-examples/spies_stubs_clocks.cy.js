/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/*!******************************************************************!*\
  !*** ./cypress/e2e/2-advanced-examples/spies_stubs_clocks.cy.js ***!
  \******************************************************************/


/// <reference types="cypress" />

context('Spies, Stubs, and Clock', () => {
  it('cy.spy() - wrap a method in a spy', () => {
    // https://on.cypress.io/spy
    cy.visit('https://example.cypress.io/commands/spies-stubs-clocks');
    const obj = {
      foo() {}
    };
    const spy = cy.spy(obj, 'foo').as('anyArgs');
    obj.foo();
    expect(spy).to.be.called;
  });
  it('cy.spy() retries until assertions pass', () => {
    cy.visit('https://example.cypress.io/commands/spies-stubs-clocks');
    const obj = {
      /**
       * Prints the argument passed
       * @param x {any}
      */
      foo(x) {
        console.log('obj.foo called with', x);
      }
    };
    cy.spy(obj, 'foo').as('foo');
    setTimeout(() => {
      obj.foo('first');
    }, 500);
    setTimeout(() => {
      obj.foo('second');
    }, 2500);
    cy.get('@foo').should('have.been.calledTwice');
  });
  it('cy.stub() - create a stub and/or replace a function with stub', () => {
    // https://on.cypress.io/stub
    cy.visit('https://example.cypress.io/commands/spies-stubs-clocks');
    const obj = {
      /**
       * prints both arguments to the console
       * @param a {string}
       * @param b {string}
      */
      foo(a, b) {
        console.log('a', a, 'b', b);
      }
    };
    const stub = cy.stub(obj, 'foo').as('foo');
    obj.foo('foo', 'bar');
    expect(stub).to.be.called;
  });
  it('cy.clock() - control time in the browser', () => {
    // https://on.cypress.io/clock

    // create the date in UTC so it's always the same
    // no matter what local timezone the browser is running in
    const now = new Date(Date.UTC(2017, 2, 14)).getTime();
    cy.clock(now);
    cy.visit('https://example.cypress.io/commands/spies-stubs-clocks');
    cy.get('#clock-div').click();
    cy.get('#clock-div').should('have.text', '1489449600');
  });
  it('cy.tick() - move time in the browser', () => {
    // https://on.cypress.io/tick

    // create the date in UTC so it's always the same
    // no matter what local timezone the browser is running in
    const now = new Date(Date.UTC(2017, 2, 14)).getTime();
    cy.clock(now);
    cy.visit('https://example.cypress.io/commands/spies-stubs-clocks');
    cy.get('#tick-div').click();
    cy.get('#tick-div').should('have.text', '1489449600');
    cy.tick(10000); // 10 seconds passed
    cy.get('#tick-div').click();
    cy.get('#tick-div').should('have.text', '1489449610');
  });
  it('cy.stub() matches depending on arguments', () => {
    // see all possible matchers at
    // https://sinonjs.org/releases/latest/matchers/
    const greeter = {
      /**
       * Greets a person
       * @param {string} name
      */
      greet(name) {
        return `Hello, ${name}!`;
      }
    };
    cy.stub(greeter, 'greet').callThrough() // if you want non-matched calls to call the real method
    .withArgs(Cypress.sinon.match.string).returns('Hi').withArgs(Cypress.sinon.match.number).throws(new Error('Invalid name'));
    expect(greeter.greet('World')).to.equal('Hi');
    expect(() => greeter.greet(42)).to.throw('Invalid name');
    expect(greeter.greet).to.have.been.calledTwice;

    // non-matched calls goes the actual method
    expect(greeter.greet()).to.equal('Hello, undefined!');
  });
  it('matches call arguments using Sinon matchers', () => {
    // see all possible matchers at
    // https://sinonjs.org/releases/latest/matchers/
    const calculator = {
      /**
       * returns the sum of two arguments
       * @param a {number}
       * @param b {number}
      */
      add(a, b) {
        return a + b;
      }
    };
    const spy = cy.spy(calculator, 'add').as('add');
    expect(calculator.add(2, 3)).to.equal(5);

    // if we want to assert the exact values used during the call
    expect(spy).to.be.calledWith(2, 3);

    // let's confirm "add" method was called with two numbers
    expect(spy).to.be.calledWith(Cypress.sinon.match.number, Cypress.sinon.match.number);

    // alternatively, provide the value to match
    expect(spy).to.be.calledWith(Cypress.sinon.match(2), Cypress.sinon.match(3));

    // match any value
    expect(spy).to.be.calledWith(Cypress.sinon.match.any, 3);

    // match any value from a list
    expect(spy).to.be.calledWith(Cypress.sinon.match.in([1, 2, 3]), 3);

    /**
     * Returns true if the given number is even
     * @param {number} x
     */
    const isEven = x => x % 2 === 0;

    // expect the value to pass a custom predicate function
    // the second argument to "sinon.match(predicate, message)" is
    // shown if the predicate does not pass and assertion fails
    expect(spy).to.be.calledWith(Cypress.sinon.match(isEven, 'isEven'), 3);

    /**
     * Returns a function that checks if a given number is larger than the limit
     * @param {number} limit
     * @returns {(x: number) => boolean}
     */
    const isGreaterThan = limit => x => x > limit;

    /**
     * Returns a function that checks if a given number is less than the limit
     * @param {number} limit
     * @returns {(x: number) => boolean}
     */
    const isLessThan = limit => x => x < limit;

    // you can combine several matchers using "and", "or"
    expect(spy).to.be.calledWith(Cypress.sinon.match.number, Cypress.sinon.match(isGreaterThan(2), '> 2').and(Cypress.sinon.match(isLessThan(4), '< 4')));
    expect(spy).to.be.calledWith(Cypress.sinon.match.number, Cypress.sinon.match(isGreaterThan(200), '> 200').or(Cypress.sinon.match(3)));

    // matchers can be used from BDD assertions
    cy.get('@add').should('have.been.calledWith', Cypress.sinon.match.number, Cypress.sinon.match(3));

    // you can alias matchers for shorter test code
    const {
      match: M
    } = Cypress.sinon;
    cy.get('@add').should('have.been.calledWith', M.number, M(3));
  });
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxDQUFDRyxNQUFNLEVBQUVMLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRXJEO0lBQ0EsTUFBTTtNQUFFQSxLQUFLLEVBQUVzQjtJQUFFLENBQUMsR0FBR3hCLE9BQU8sQ0FBQ0MsS0FBSztJQUVsQ2hDLEVBQUUsQ0FBQ2MsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDQyxNQUFNLENBQUMsc0JBQXNCLEVBQUV3QyxDQUFDLENBQUNuQixNQUFNLEVBQUVtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0QsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXJhYmFuay1hdXRvbWF0aW9uLy4vY3lwcmVzcy9lMmUvMi1hZHZhbmNlZC1leGFtcGxlcy9zcGllc19zdHVic19jbG9ja3MuY3kuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJjeXByZXNzXCIgLz5cblxuY29udGV4dCgnU3BpZXMsIFN0dWJzLCBhbmQgQ2xvY2snLCAoKSA9PiB7XG4gIGl0KCdjeS5zcHkoKSAtIHdyYXAgYSBtZXRob2QgaW4gYSBzcHknLCAoKSA9PiB7XG4gICAgLy8gaHR0cHM6Ly9vbi5jeXByZXNzLmlvL3NweVxuICAgIGN5LnZpc2l0KCdodHRwczovL2V4YW1wbGUuY3lwcmVzcy5pby9jb21tYW5kcy9zcGllcy1zdHVicy1jbG9ja3MnKVxuXG4gICAgY29uc3Qgb2JqID0ge1xuICAgICAgZm9vICgpIHt9LFxuICAgIH1cblxuICAgIGNvbnN0IHNweSA9IGN5LnNweShvYmosICdmb28nKS5hcygnYW55QXJncycpXG5cbiAgICBvYmouZm9vKClcblxuICAgIGV4cGVjdChzcHkpLnRvLmJlLmNhbGxlZFxuICB9KVxuXG4gIGl0KCdjeS5zcHkoKSByZXRyaWVzIHVudGlsIGFzc2VydGlvbnMgcGFzcycsICgpID0+IHtcbiAgICBjeS52aXNpdCgnaHR0cHM6Ly9leGFtcGxlLmN5cHJlc3MuaW8vY29tbWFuZHMvc3BpZXMtc3R1YnMtY2xvY2tzJylcblxuICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgIC8qKlxuICAgICAgICogUHJpbnRzIHRoZSBhcmd1bWVudCBwYXNzZWRcbiAgICAgICAqIEBwYXJhbSB4IHthbnl9XG4gICAgICAqL1xuICAgICAgZm9vICh4KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdvYmouZm9vIGNhbGxlZCB3aXRoJywgeClcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgY3kuc3B5KG9iaiwgJ2ZvbycpLmFzKCdmb28nKVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvYmouZm9vKCdmaXJzdCcpXG4gICAgfSwgNTAwKVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBvYmouZm9vKCdzZWNvbmQnKVxuICAgIH0sIDI1MDApXG5cbiAgICBjeS5nZXQoJ0Bmb28nKS5zaG91bGQoJ2hhdmUuYmVlbi5jYWxsZWRUd2ljZScpXG4gIH0pXG5cbiAgaXQoJ2N5LnN0dWIoKSAtIGNyZWF0ZSBhIHN0dWIgYW5kL29yIHJlcGxhY2UgYSBmdW5jdGlvbiB3aXRoIHN0dWInLCAoKSA9PiB7XG4gICAgLy8gaHR0cHM6Ly9vbi5jeXByZXNzLmlvL3N0dWJcbiAgICBjeS52aXNpdCgnaHR0cHM6Ly9leGFtcGxlLmN5cHJlc3MuaW8vY29tbWFuZHMvc3BpZXMtc3R1YnMtY2xvY2tzJylcblxuICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgIC8qKlxuICAgICAgICogcHJpbnRzIGJvdGggYXJndW1lbnRzIHRvIHRoZSBjb25zb2xlXG4gICAgICAgKiBAcGFyYW0gYSB7c3RyaW5nfVxuICAgICAgICogQHBhcmFtIGIge3N0cmluZ31cbiAgICAgICovXG4gICAgICBmb28gKGEsIGIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2EnLCBhLCAnYicsIGIpXG4gICAgICB9LFxuICAgIH1cblxuICAgIGNvbnN0IHN0dWIgPSBjeS5zdHViKG9iaiwgJ2ZvbycpLmFzKCdmb28nKVxuXG4gICAgb2JqLmZvbygnZm9vJywgJ2JhcicpXG5cbiAgICBleHBlY3Qoc3R1YikudG8uYmUuY2FsbGVkXG4gIH0pXG5cbiAgaXQoJ2N5LmNsb2NrKCkgLSBjb250cm9sIHRpbWUgaW4gdGhlIGJyb3dzZXInLCAoKSA9PiB7XG4gICAgLy8gaHR0cHM6Ly9vbi5jeXByZXNzLmlvL2Nsb2NrXG5cbiAgICAvLyBjcmVhdGUgdGhlIGRhdGUgaW4gVVRDIHNvIGl0J3MgYWx3YXlzIHRoZSBzYW1lXG4gICAgLy8gbm8gbWF0dGVyIHdoYXQgbG9jYWwgdGltZXpvbmUgdGhlIGJyb3dzZXIgaXMgcnVubmluZyBpblxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKERhdGUuVVRDKDIwMTcsIDIsIDE0KSkuZ2V0VGltZSgpXG5cbiAgICBjeS5jbG9jayhub3cpXG4gICAgY3kudmlzaXQoJ2h0dHBzOi8vZXhhbXBsZS5jeXByZXNzLmlvL2NvbW1hbmRzL3NwaWVzLXN0dWJzLWNsb2NrcycpXG4gICAgY3kuZ2V0KCcjY2xvY2stZGl2JykuY2xpY2soKVxuICAgIGN5LmdldCgnI2Nsb2NrLWRpdicpXG4gICAgICAuc2hvdWxkKCdoYXZlLnRleHQnLCAnMTQ4OTQ0OTYwMCcpXG4gIH0pXG5cbiAgaXQoJ2N5LnRpY2soKSAtIG1vdmUgdGltZSBpbiB0aGUgYnJvd3NlcicsICgpID0+IHtcbiAgICAvLyBodHRwczovL29uLmN5cHJlc3MuaW8vdGlja1xuXG4gICAgLy8gY3JlYXRlIHRoZSBkYXRlIGluIFVUQyBzbyBpdCdzIGFsd2F5cyB0aGUgc2FtZVxuICAgIC8vIG5vIG1hdHRlciB3aGF0IGxvY2FsIHRpbWV6b25lIHRoZSBicm93c2VyIGlzIHJ1bm5pbmcgaW5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZShEYXRlLlVUQygyMDE3LCAyLCAxNCkpLmdldFRpbWUoKVxuXG4gICAgY3kuY2xvY2sobm93KVxuICAgIGN5LnZpc2l0KCdodHRwczovL2V4YW1wbGUuY3lwcmVzcy5pby9jb21tYW5kcy9zcGllcy1zdHVicy1jbG9ja3MnKVxuICAgIGN5LmdldCgnI3RpY2stZGl2JykuY2xpY2soKVxuICAgIGN5LmdldCgnI3RpY2stZGl2JylcbiAgICAgIC5zaG91bGQoJ2hhdmUudGV4dCcsICcxNDg5NDQ5NjAwJylcblxuICAgIGN5LnRpY2soMTAwMDApIC8vIDEwIHNlY29uZHMgcGFzc2VkXG4gICAgY3kuZ2V0KCcjdGljay1kaXYnKS5jbGljaygpXG4gICAgY3kuZ2V0KCcjdGljay1kaXYnKVxuICAgICAgLnNob3VsZCgnaGF2ZS50ZXh0JywgJzE0ODk0NDk2MTAnKVxuICB9KVxuXG4gIGl0KCdjeS5zdHViKCkgbWF0Y2hlcyBkZXBlbmRpbmcgb24gYXJndW1lbnRzJywgKCkgPT4ge1xuICAgIC8vIHNlZSBhbGwgcG9zc2libGUgbWF0Y2hlcnMgYXRcbiAgICAvLyBodHRwczovL3Npbm9uanMub3JnL3JlbGVhc2VzL2xhdGVzdC9tYXRjaGVycy9cbiAgICBjb25zdCBncmVldGVyID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBHcmVldHMgYSBwZXJzb25cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICAqL1xuICAgICAgZ3JlZXQgKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGBIZWxsbywgJHtuYW1lfSFgXG4gICAgICB9LFxuICAgIH1cblxuICAgIGN5LnN0dWIoZ3JlZXRlciwgJ2dyZWV0JylcbiAgICAgIC5jYWxsVGhyb3VnaCgpIC8vIGlmIHlvdSB3YW50IG5vbi1tYXRjaGVkIGNhbGxzIHRvIGNhbGwgdGhlIHJlYWwgbWV0aG9kXG4gICAgICAud2l0aEFyZ3MoQ3lwcmVzcy5zaW5vbi5tYXRjaC5zdHJpbmcpLnJldHVybnMoJ0hpJylcbiAgICAgIC53aXRoQXJncyhDeXByZXNzLnNpbm9uLm1hdGNoLm51bWJlcikudGhyb3dzKG5ldyBFcnJvcignSW52YWxpZCBuYW1lJykpXG5cbiAgICBleHBlY3QoZ3JlZXRlci5ncmVldCgnV29ybGQnKSkudG8uZXF1YWwoJ0hpJylcbiAgICBleHBlY3QoKCkgPT4gZ3JlZXRlci5ncmVldCg0MikpLnRvLnRocm93KCdJbnZhbGlkIG5hbWUnKVxuICAgIGV4cGVjdChncmVldGVyLmdyZWV0KS50by5oYXZlLmJlZW4uY2FsbGVkVHdpY2VcblxuICAgIC8vIG5vbi1tYXRjaGVkIGNhbGxzIGdvZXMgdGhlIGFjdHVhbCBtZXRob2RcbiAgICBleHBlY3QoZ3JlZXRlci5ncmVldCgpKS50by5lcXVhbCgnSGVsbG8sIHVuZGVmaW5lZCEnKVxuICB9KVxuXG4gIGl0KCdtYXRjaGVzIGNhbGwgYXJndW1lbnRzIHVzaW5nIFNpbm9uIG1hdGNoZXJzJywgKCkgPT4ge1xuICAgIC8vIHNlZSBhbGwgcG9zc2libGUgbWF0Y2hlcnMgYXRcbiAgICAvLyBodHRwczovL3Npbm9uanMub3JnL3JlbGVhc2VzL2xhdGVzdC9tYXRjaGVycy9cbiAgICBjb25zdCBjYWxjdWxhdG9yID0ge1xuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIHRoZSBzdW0gb2YgdHdvIGFyZ3VtZW50c1xuICAgICAgICogQHBhcmFtIGEge251bWJlcn1cbiAgICAgICAqIEBwYXJhbSBiIHtudW1iZXJ9XG4gICAgICAqL1xuICAgICAgYWRkIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICsgYlxuICAgICAgfSxcbiAgICB9XG5cbiAgICBjb25zdCBzcHkgPSBjeS5zcHkoY2FsY3VsYXRvciwgJ2FkZCcpLmFzKCdhZGQnKVxuXG4gICAgZXhwZWN0KGNhbGN1bGF0b3IuYWRkKDIsIDMpKS50by5lcXVhbCg1KVxuXG4gICAgLy8gaWYgd2Ugd2FudCB0byBhc3NlcnQgdGhlIGV4YWN0IHZhbHVlcyB1c2VkIGR1cmluZyB0aGUgY2FsbFxuICAgIGV4cGVjdChzcHkpLnRvLmJlLmNhbGxlZFdpdGgoMiwgMylcblxuICAgIC8vIGxldCdzIGNvbmZpcm0gXCJhZGRcIiBtZXRob2Qgd2FzIGNhbGxlZCB3aXRoIHR3byBudW1iZXJzXG4gICAgZXhwZWN0KHNweSkudG8uYmUuY2FsbGVkV2l0aChDeXByZXNzLnNpbm9uLm1hdGNoLm51bWJlciwgQ3lwcmVzcy5zaW5vbi5tYXRjaC5udW1iZXIpXG5cbiAgICAvLyBhbHRlcm5hdGl2ZWx5LCBwcm92aWRlIHRoZSB2YWx1ZSB0byBtYXRjaFxuICAgIGV4cGVjdChzcHkpLnRvLmJlLmNhbGxlZFdpdGgoQ3lwcmVzcy5zaW5vbi5tYXRjaCgyKSwgQ3lwcmVzcy5zaW5vbi5tYXRjaCgzKSlcblxuICAgIC8vIG1hdGNoIGFueSB2YWx1ZVxuICAgIGV4cGVjdChzcHkpLnRvLmJlLmNhbGxlZFdpdGgoQ3lwcmVzcy5zaW5vbi5tYXRjaC5hbnksIDMpXG5cbiAgICAvLyBtYXRjaCBhbnkgdmFsdWUgZnJvbSBhIGxpc3RcbiAgICBleHBlY3Qoc3B5KS50by5iZS5jYWxsZWRXaXRoKEN5cHJlc3Muc2lub24ubWF0Y2guaW4oWzEsIDIsIDNdKSwgMylcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbnVtYmVyIGlzIGV2ZW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAqL1xuICAgIGNvbnN0IGlzRXZlbiA9ICh4KSA9PiB4ICUgMiA9PT0gMFxuXG4gICAgLy8gZXhwZWN0IHRoZSB2YWx1ZSB0byBwYXNzIGEgY3VzdG9tIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgIC8vIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gXCJzaW5vbi5tYXRjaChwcmVkaWNhdGUsIG1lc3NhZ2UpXCIgaXNcbiAgICAvLyBzaG93biBpZiB0aGUgcHJlZGljYXRlIGRvZXMgbm90IHBhc3MgYW5kIGFzc2VydGlvbiBmYWlsc1xuICAgIGV4cGVjdChzcHkpLnRvLmJlLmNhbGxlZFdpdGgoQ3lwcmVzcy5zaW5vbi5tYXRjaChpc0V2ZW4sICdpc0V2ZW4nKSwgMylcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhIGdpdmVuIG51bWJlciBpcyBsYXJnZXIgdGhhbiB0aGUgbGltaXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGltaXRcbiAgICAgKiBAcmV0dXJucyB7KHg6IG51bWJlcikgPT4gYm9vbGVhbn1cbiAgICAgKi9cbiAgICBjb25zdCBpc0dyZWF0ZXJUaGFuID0gKGxpbWl0KSA9PiAoeCkgPT4geCA+IGxpbWl0XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgYSBnaXZlbiBudW1iZXIgaXMgbGVzcyB0aGFuIHRoZSBsaW1pdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdFxuICAgICAqIEByZXR1cm5zIHsoeDogbnVtYmVyKSA9PiBib29sZWFufVxuICAgICAqL1xuICAgIGNvbnN0IGlzTGVzc1RoYW4gPSAobGltaXQpID0+ICh4KSA9PiB4IDwgbGltaXRcblxuICAgIC8vIHlvdSBjYW4gY29tYmluZSBzZXZlcmFsIG1hdGNoZXJzIHVzaW5nIFwiYW5kXCIsIFwib3JcIlxuICAgIGV4cGVjdChzcHkpLnRvLmJlLmNhbGxlZFdpdGgoXG4gICAgICBDeXByZXNzLnNpbm9uLm1hdGNoLm51bWJlcixcbiAgICAgIEN5cHJlc3Muc2lub24ubWF0Y2goaXNHcmVhdGVyVGhhbigyKSwgJz4gMicpLmFuZChDeXByZXNzLnNpbm9uLm1hdGNoKGlzTGVzc1RoYW4oNCksICc8IDQnKSksXG4gICAgKVxuXG4gICAgZXhwZWN0KHNweSkudG8uYmUuY2FsbGVkV2l0aChcbiAgICAgIEN5cHJlc3Muc2lub24ubWF0Y2gubnVtYmVyLFxuICAgICAgQ3lwcmVzcy5zaW5vbi5tYXRjaChpc0dyZWF0ZXJUaGFuKDIwMCksICc+IDIwMCcpLm9yKEN5cHJlc3Muc2lub24ubWF0Y2goMykpLFxuICAgIClcblxuICAgIC8vIG1hdGNoZXJzIGNhbiBiZSB1c2VkIGZyb20gQkREIGFzc2VydGlvbnNcbiAgICBjeS5nZXQoJ0BhZGQnKS5zaG91bGQoJ2hhdmUuYmVlbi5jYWxsZWRXaXRoJyxcbiAgICAgIEN5cHJlc3Muc2lub24ubWF0Y2gubnVtYmVyLCBDeXByZXNzLnNpbm9uLm1hdGNoKDMpKVxuXG4gICAgLy8geW91IGNhbiBhbGlhcyBtYXRjaGVycyBmb3Igc2hvcnRlciB0ZXN0IGNvZGVcbiAgICBjb25zdCB7IG1hdGNoOiBNIH0gPSBDeXByZXNzLnNpbm9uXG5cbiAgICBjeS5nZXQoJ0BhZGQnKS5zaG91bGQoJ2hhdmUuYmVlbi5jYWxsZWRXaXRoJywgTS5udW1iZXIsIE0oMykpXG4gIH0pXG59KVxuIl0sIm5hbWVzIjpbImNvbnRleHQiLCJpdCIsImN5IiwidmlzaXQiLCJvYmoiLCJmb28iLCJzcHkiLCJhcyIsImV4cGVjdCIsInRvIiwiYmUiLCJjYWxsZWQiLCJ4IiwiY29uc29sZSIsImxvZyIsInNldFRpbWVvdXQiLCJnZXQiLCJzaG91bGQiLCJhIiwiYiIsInN0dWIiLCJub3ciLCJEYXRlIiwiVVRDIiwiZ2V0VGltZSIsImNsb2NrIiwiY2xpY2siLCJ0aWNrIiwiZ3JlZXRlciIsImdyZWV0IiwibmFtZSIsImNhbGxUaHJvdWdoIiwid2l0aEFyZ3MiLCJDeXByZXNzIiwic2lub24iLCJtYXRjaCIsInN0cmluZyIsInJldHVybnMiLCJudW1iZXIiLCJ0aHJvd3MiLCJFcnJvciIsImVxdWFsIiwidGhyb3ciLCJoYXZlIiwiYmVlbiIsImNhbGxlZFR3aWNlIiwiY2FsY3VsYXRvciIsImFkZCIsImNhbGxlZFdpdGgiLCJhbnkiLCJpbiIsImlzRXZlbiIsImlzR3JlYXRlclRoYW4iLCJsaW1pdCIsImlzTGVzc1RoYW4iLCJhbmQiLCJvciIsIk0iXSwic291cmNlUm9vdCI6IiJ9